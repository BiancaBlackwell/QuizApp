<!DOCTYPE html>
<html lang="en">

<style>
  body{
    background-image: url(/static/main_bg.png);
    background-attachment: fixed;
    background-size: cover;
  }
  h1{
    color: #212121;
    text-align:center;
  }
  h2{
    color: #212121;
    text-align:center;
  }
  h3{
    color: #ccc;
    font-size: 30px;
  }
  h4{
    color: #212121;
    text-align:center;
  }
  .btn-dark{
    background-color: #25274d;
  }
</style>

<head>
<title>Quiz Lobby</title>
</head>
<body>

  <h1>Main Lobby</h1>

  <h2>Players</h2>

  <h4>Player 1</h4>
  <h4>Player 2</h4>
  <h4>Player 3</h4>


  <p>{{ userid }} </p>
  <h3>No message yet..</h3>
  <div class="message_holder"></div>

  <form action="" method="POST">
    <input type="text" class="username" placeholder="User Name"/>
    <input type="text" class="message" placeholder="Messages"/>
    <input type="submit"/>
  </form>
  
  <div class="row text-center">
    <div class="col">
        <button type="submit" class="btn btn-dark text-nowrap"onclick="location.href = '/trivia';">Start</button>
    </div>
  </div>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script>
  <script type="text/javascript">
    var socket = io.connect('http://' + document.domain + ':' + location.port);

    socket.on( 'connect', function() {
      socket.emit( 'my event', {
        data: 'User Connected'
      } )
      var form = $( 'form' ).on( 'submit', function( e ) {
        e.preventDefault()
        let user_name = $( 'input.username' ).val()
        let user_input = $( 'input.message' ).val()
        socket.emit( 'my event', {
          user_name : user_name,
          message : user_input
        } )
        $( 'input.message' ).val( '' ).focus()
      } )
    } )
    socket.on( 'my response', function( msg ) {
      console.log( msg )
      if( typeof msg.user_name !== 'undefined' ) {
        $( 'h3' ).remove()
        $( 'div.message_holder' ).append( '<div><b style="color: #000">'+msg.user_name+'</b> '+msg.message+'</div>' )
      }
    })
  </script>
  <script>
  // Check if the sessionStorage object exists
  if(sessionStorage) {
      // Store data
      sessionStorage.setItem('uid', userid)
      // Retrieve data
      alert("Hi, " + sessionStorage.getItem('uid'));
  } else {
      alert("Sorry, your browser do not support session storage.");
  }
  </script>





<script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

<Message/>

  <div id="chat"></div>

  <script type="text/babel">
    import * as React from "react";
    import { render } from "react-dom";
    import createClass from 'create-react-class';


    var Message = React.createClass({
      render : function (){
        return (<h1>Test</h1>);
      }
    });

    ReactDOM.render(<Message/>, document.getElementById('chat'));

  </script>





</body>
</html>